<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>TromboneChords</title>
    <!-- p5.js -->
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/p5.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/p5@0.10.1/lib/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/addons/p5.dom.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/addons/p5.sound.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/p5@0.10.1/lib/addons/p5.sound.min.js"></script>
    <!-- ml5 -->
    <script src="https://unpkg.com/ml5@0.4.3/dist/ml5.min.js"></script>
    <!-- VexFlow 2 -->
    <script src="https://unpkg.com/vexflow@3.0.9/releases/vexflow-min.js"></script>
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Fredericka+the+Great&display=swap" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="style.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>

</head>

<body>

    <div id="titolo">Trombone Chords</div>

    <div id="easy" onclick="facile()" onmouseover="this.style.backgroundColor = 'goldenrod'" onmouseout="this.style.backgroundColor = 'gold'">Easy</div>

    <div id="medium" onclick="medio()" onmouseover="this.style.backgroundColor = 'goldenrod'" onmouseout="this.style.backgroundColor = 'gold'">Medium</div>

    <div id="hard" onclick="difficile()" onmouseover="this.style.backgroundColor = 'goldenrod'" onmouseout="this.style.backgroundColor = 'gold'">Hard</div>

    <div id="creditBtn" onmouseover="this.style.backgroundColor = 'goldenrod'" onmouseout="this.style.backgroundColor = 'gold'" onclick="showCredits()">Credits</div>

    <div id="credits">TromboneChords by Lorenzo Francesco and Sorini Luca</div>

    <div id="back" onmouseover="this.style.backgroundColor = 'goldenrod'" onmouseout="this.style.backgroundColor = 'gold'" onclick="goBack()">Back</div>

    <div id="restart" onmouseover="this.style.backgroundColor = 'goldenrod'" onmouseout="this.style.backgroundColor = 'gold'" onclick="restart()">Restart</div>

    <div id="gameOver" style="position: relative;">
	    <h1 class="ml15">
		  <span class="word">Game</span>
		  <span class="word">over</span>
		</h1>
	</div>

	<div id="youWin" style="position: relative;">
	    <h2 class="ml15">
		  <span class="word">You</span>
		  <span class="word">win</span>
		</h2>
	</div>

    <div id="main" style="position: relative;">
	    <!--<canvas id="defaultCanvas0">-->
	   	<div id="pentagramma"></div>
	   	<div id="posizioni"> PROVA </div>
	   	<!-- <div id="gioco" style="margin: auto"></div> -->
    </div>



    <script src="game.js"></script>
    <script src="notes.js"></script>
    <script src="chords.js"></script>
    <script src="levels.js"></script>
    <script src="tuner.js"></script>

    <script>
    	// -- Grafica in movimento per le scritte "Game over" e "You win" --
    	anime.timeline({loop: true})
	         .add({
	           targets: '.ml15 .word',
	           scale: [14,1],
	           opacity: [0,1],
	           easing: "easeOutCirc",
	           duration: 800,
	           delay: (el, i) => 800 * i
	         }).add({
	           targets: '.ml15',
	           opacity: 0,
	           duration: 1000,
	           easing: "easeOutExpo",
	           delay: 1000
	         });

	    document.getElementById("gameOver").style.display = "none";
	    document.getElementById("youWin").style.display = "none";
	    document.getElementById("pentagramma").style.display = "none";
    	//else {
    	//	document.getElementById("scritta").style.display = "block";
    	//}

    	function removeElement(elementId) {
		    // Removes an element from the document
		    var element = document.getElementById(elementId);
		    element.parentNode.removeChild(element);
		}

		function addElement(parentId, elementTag, elementId, html) {
		    // Adds an element to the document
		    var p = document.getElementById(parentId);
		    var newElement = document.createElement(elementTag);
		    newElement.setAttribute('id', elementId);
		    newElement.innerHTML = html;
		    p.appendChild(newElement);
		}

      var runGame = function(){

      	stop = 0;
      	stopTime = 0;
      	stopScore = 0;
      	stopDraw = 0;

        document.getElementById("easy").style.display = "none";
        document.getElementById("medium").style.display = "none";
        document.getElementById("hard").style.display = "none";
        document.getElementById("titolo").style.display = "none";

        document.getElementById("back").style.display = "none";
        document.getElementById("restart").style.display = "none";

        document.getElementById("credits").style.display = "none";
        document.getElementById("main").style.display = "block";
        document.getElementById("creditBtn").style.display = "none";

        appearCanvas();

      };

      var showCredits = function(){
       document.getElementById("restart").style.display = "none";
       document.getElementById("titolo").style.display = "none";
       document.getElementById("creditBtn").style.display = "none";
       document.getElementById("easy").style.display = "none";
       document.getElementById("medium").style.display = "none";
       document.getElementById("hard").style.display = "none";
       document.getElementById("credits").style.display = "block";
       document.getElementById("back").style.display = "block";
      };

      var goBack = function(){

      	 stop = 1;
      	 stopTime = 1;

	     console.log('Go Back')

	     document.getElementById("gameOver").style.display = "none";
	     document.getElementById("youWin").style.display = "none";

	     document.getElementById("restart").style.display = "none";
	     document.getElementById("back").style.display = "none";
	     document.getElementById("credits").style.display = "none";
	     document.getElementById("main").style.display = "none";
	     document.getElementById("titolo").style.display = "block";
	     document.getElementById("easy").style.display = "block";
	     document.getElementById("medium").style.display = "block";
	     document.getElementById("hard").style.display = "block";
	     document.getElementById("creditBtn").style.display = "block";

	     document.getElementById("pentagramma").style.display = "none";

	     removeElement('pentagramma');

    	 var indhtml = '<div id="pentagramma"></div>';

    	 addElement('main', 'div', 'pentagramma', indhtml);

      	 canvas.remove();
      };

      var restart = function(){

      	stop = 0;
      	stopTime = 0;
      	stopScore = 0;
      	stopDraw = 0;
      	startVF = 1;

        document.getElementById("easy").style.display = "none";
        document.getElementById("medium").style.display = "none";
        document.getElementById("hard").style.display = "none";
        document.getElementById("titolo").style.display = "none";

        document.getElementById("back").style.display = "none";
        document.getElementById("restart").style.display = "none";

        document.getElementById("credits").style.display = "none";
        document.getElementById("main").style.display = "block";
        document.getElementById("creditBtn").style.display = "none";

        document.getElementById("pentagramma").style.display = "none";

        //pentagramma.remove();

        removeElement('pentagramma');

    	var indhtml = '<div id="pentagramma"></div>';

    	addElement('main', 'div', 'pentagramma', indhtml);

        reset();

      };

      var facile = function() {
    	  fac = true;
    	  med = false;
    	  dif = false;

        reset();
        runGame();
      };

      var medio = function() {
    	  fac = false;
    	  med = true;
    	  dif = false;

        reset();
        runGame();
      };

      var difficile = function() {
    	  fac = false;
    	  med = false;
    	  dif = true;

        reset();
        runGame();
      };

    </script>

  </body>

<html>
